(()=>{document.addEventListener("DOMContentLoaded",()=>{let s=document.querySelectorAll(".lang-switcher a[data-lang]"),l=document.querySelectorAll('.lang-switcher a[data-switch-type="article-local"]'),o=(e,t)=>{let c=/^\/(en|ua)(\/|$)/,a=e.replace(c,"/");t!=="en"&&(a=`/${t}${a}`),a=a.replace(/\/\//g,"/");let i=e.endsWith("/"),r=a.endsWith("/");return a!=="/"&&(i&&!r?a+="/":!i&&r&&(a=a.slice(0,-1))),a},h=e=>{e.preventDefault();let t=e.currentTarget.dataset.lang;if(t){localStorage.setItem("userLang",t);let c=o(window.location.pathname,t);window.location.href=c+window.location.search+window.location.hash}};s.forEach(e=>e.addEventListener("click",h)),l.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),sessionStorage.setItem("isLocalArticleSwitch","true"),window.location.href=t.currentTarget.dataset.targetUrl})});let n=localStorage.getItem("userLang");if(sessionStorage.getItem("isLocalArticleSwitch"))sessionStorage.removeItem("isLocalArticleSwitch");else if(n&&n!==document.documentElement.lang){let e=window.location.pathname,t=e==="/"||/^\/(en|ua)\/$/.test(e),c=/^\/(en|ua)?\/articles(\/|$)/.test(e);if(t||c){let a=o(e,n);a!==e&&window.location.replace(a+window.location.search+window.location.hash)}}n&&[document.querySelector(".home-icon-container a"),document.querySelector('.menu-items-container ul li a[href*="/articles"]')].forEach(t=>{t&&(t.href=o(t.getAttribute("href"),n))})});})();
